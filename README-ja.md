# 🎨 AviUtl2 Style Configuration Editor

Gradio でビルドされた現代的な Web ベースの AviUtl2 のスタイル設定エディターです。AviUtl2 のインターフェーススタイル設定を直感的に編集とカスタマイズするためのツールです。

## ✨ 機能

### 🎯 コアの機能
- **視覚的な編集インターフェース**：面倒なテキスト編集を現代的な Web インターフェースに置き換えます
- **リアルタイムプレビュー**：編集時にリアルタイムで設定効果をプレビュー可能です
- **一括でパラメーターを調整**：複数の関連パラメータを同時に調整可能です
- **スマートな検証**：設定パラメーターの形式と範囲を自動で検証します
- **🌐 多言語をサポート**：中国語、英語、日本語のインターフェースを完全にサポートしています

### 🎨 対応している設定項目

#### フォント設定 (Font)
- 既定のフォント、コントロールフォント、エディターフォントなど
- フォントサイズとフォント名の個別設定をサポート
- 異なるインターフェース要素向けの専用フォントを設定

#### カラーテーマ (Color)
- 背景の色、テキストの色、境界の色などの基本色
- ボタン、スライダー、進捗バーなどのコントロールの色
- レイヤー、オブジェクト、アンカーなどのプロフェッショナルな要素の色
- グラデーション色と透過設定をサポート

#### レイアウトの調整 (Layout)
- ウィンドウサイズ、セパレーターの幅、スクロールバーの寸法
- レイヤーの高さ、タイムラインの高さ、コントロールバーの寸法
- リスト項目の高さ、マージンなどの詳細な調整

#### 形式のテンプレート (Format)
- ボトムバー表示形式のカスタマイズ
- 変数プレースホルダーによる柔軟な設定

## 🚀 クイックスタート

### システム要件
- Python 3.7+ (未インストールの場合、スタートアップスクリプトがインストールをガイドします)
- モダン Web ブラウザー (Chrome、Firefox、Safari など)
- インターネット接続 (初回時で依存関係をインストールするときに使用)

### 🌐 多言語サポート

このプロジェクトは 3 つの言語インターフェースをサポートしています:

- **中国語 (zh)** - 既定の言語
- **English (en)** - 英語のインターフェース
- **日本語 (ja)** - 日本語のインターフェース

#### 異なる言語での起動

**方法1：直接的にコマンドラインで起動**
```bash
# 中国語のインターフェース
python aviutl2_style_editor.py --lang zh

# 英語のインターフェース
python aviutl2_style_editor.py --lang en

# 日本語のインターフェース
python aviutl2_style_editor.py --lang ja
```

**方法2: スタートアップスクリプトの使用 (推奨)**

**Windows ユーザー:**
- `start_editor.bat` - インタラクティブな言語選択ランチャー
- `start_zh.bat` - 中国語を直接起動
- `start_en.bat` - 英語を直接起動
- `start_ja.bat` - 日本語を直接起動

**Linux/macOS ユーザー：**
- `./start_editor.sh` - インタラクティブな言語選択ランチャー (実行権限が必要)

### 🚀 ワンクリックインストールと起動 (初心者推奨)

#### Windows ユーザー (最も簡単な方法)
1. **`start_editor.bat` をダブルクリック**
2. スクリプトが自動的に以下の操作を案内します:
   - ✅ Python がインストールされているかチェック
   - ✅ 仮想環境を作成 (必要に応じて)
   - ✅ 必要な依存関係をすべてインストール
   - ✅ 言語選択をガイド
   - ✅ ブラウザーでエディターを起動

#### Linux/macOS ユーザー
1. **スクリプト実行権限設定** (初回のみ):
   ```bash
   chmod +x start_editor.sh
   ```

2. **スタートアップスクリプトを実行**:
   ```bash
   ./start_editor.sh
   ```

3. スクリプトが自動的に以下の操作を案内します:
   - ✅ Python がインストールされているかチェック
   - ✅ 仮想環境を作成 (必要に応じて)
   - ✅ 必要な依存関係をすべてインストール
   - ✅ 言語選択をガイド
   - ✅ ブラウザーでエディターを起動

#### インテリジェントスタートアップスクリプトの機能

スマートスタートアップスクリプトは以下の機能を提供します:

1. **🔍 環境検出**
   - Python のインストールとバージョンチェック
   - pip 可用性を検証
   - プロジェクトファイル完全性を検証

2. **🏠 仮想環境管理**
   - 仮想環境を自動で作成
   - 仮想環境を自動でアクティベーション
   - システム Python 環境をクリーンに維持

3. **📦 依存関係管理**
   - 必要なパッケージをチェック (gradio)
   - 不足している依存関係を自動でインストール
   - pip を最新バージョンにアップグレード

4. **🌐 言語選択**
   - インタラクティブな言語選択 (中国語/英語/日本語)
   - 言語設定を記憶
   - コマンドライン言語の上書きをサポート

5. **🚨 エラーハンドリング**
   - 2 言語での明確なエラーメッセージ
   - 役立つトラブルシューティングを提案
   - 優雅な障害回復

### 手動インストール (上級者ユーザー向け)

#### 方法 1: コマンドラインでのインストール

1. **プロジェクトをクローン**
   ```bash
   git clone https://github.com/your-username/aviutl2_style_editor.git
   cd aviutl2_style_editor
   ```

2. **仮想環境の作成**
   ```bash
   python -m venv .venv
   ```

3. **仮想環境をアクティベーション**
   - **Windows**: `.venv\Scripts\activate`
   - **Linux/macOS**: `source .venv/bin/activate`

4. **依存関係をインストール**
   ```bash
   pip install -r requirements.txt
   ```

5. **エディターを実行**
   ```bash
   python aviutl2_style_editor.py --lang ja  # 日本語
   python aviutl2_style_editor.py --lang en  # 英語
   python aviutl2_style_editor.py --lang zh  # 中国語
   ```

6. **ブラウザーを開く**
   `http://localhost:7860` にアクセスで使用開始

#### 方法 2: クイックで言語別に起動

メインスタートアップスクリプトを一度実行後にクイックスタートスクリプトを使用可能です:

- **Windows**: `start_zh.bat`, `start_en.bat`, `start_ja.bat`
- **Linux/macOS**: エイリアスを作成または言語パラメーター付きメインスクリプト使用

### トラブルシューティング

#### よくある問題

**❌ "Python not found" エラー**
- https://www.python.org/downloads/ から Python 3.7+ をインストールしてください
- インストール時に "Add Python to PATH" にチェックを入れてください

**❌ "Virtual environment creation failed" エラー**
- プロジェクトディレクトリの書き込み権限を確認してください
- 管理者としてスクリプトを実行してください (Windows) または sudo を使用 (Linux)

**❌ "Dependency installation failed" エラー**
- インターネット接続を確認してください
- こちらを手動で実行: `pip install gradio`
- プロキシ環境下では pip プロキシ設定を確認してください

**❌ "Port already in use" エラー**
- ポート 7860 番を使用している他のアプリケーションを閉じてください
- または Python スクリプトのポートを変更してください

#### ヘルプを取得

問題が発生した場合:
1. エラーメッセージを確認してください (2 言語で表示します)
2. 提供されたトラブルシューティングの提案に従ってください
3. スタートアップスクリプトを再度実行する
4. プロジェクトディレクトリのすべてファイルがあるか確認してください

## 📖 ユーザーガイド

### 基本操作のフロー

1. **設定ファイルの読み込み**
   - 「style.conf ファイルを選択」ボタンをクリック
   - AviUtl2 スタイル設定ファイルを選択します
   - システムが自動的に解析して設定パラメーターを読み込みます

2. **設定パラメータの編集**
   - 異なるタブで各パラメータを調整
   - フォント設定：インターフェースで使用するフォントを調整
   - 色設定：カラーピッカーを使用してテーマ色を調整
   - レイアウト設定：インターフェースのサイズと間隔を調整
   - フォーマット設定：表示形式をカスタマイズ

3. **設定の保存**
   - 保存ファイル名を入力（デフォルト：style_new.conf）
   - 「設定を保存」ボタンをクリック
   - 生成された新しい設定ファイルをAviUtl2設定ディレクトリにコピー

### 設定パラメータの説明

#### フォントパラメータ形式
- **単一値**：例 `13` はフォントサイズを表す
- **フォント名**：例 `Yu Gothic UI` はフォント名を表す
- **複合パラメータ**：例 `16,Consolas` は「フォントサイズ,フォント名」を表す

#### カラーパラメータ形式
- **6桁16進数**：例 `202020` はRGBカラーを表す
- **8桁16進数**：例 `202020ff` はRGBAカラー（透明度付き）を表す
- **複数色**：例 `903838,b84848` はグラデーションカラーを表す

### 設定ファイルの場所

AviUtl2のスタイル設定ファイルは通常以下の場所にあります：
- `%ProgramData%\aviutl2\style.conf` (Windows)
- `~/Library/Application Support/aviutl2/style.conf` (macOS)
- `/usr/share/aviutl2/style.conf` (Linux)

## 📁 プロジェクト構造

```
aviutl2_style_editor/
├── aviutl2_style_editor.py    # メインプログラムファイル
├── locales/                   # 🌐 言語ファイルディレクトリ
│   ├── zh.json               # 中国語言語パック
│   ├── en.json               # 英語言語パック
│   └── ja.json               # 日本語言語パック
├── start_editor.bat          # 🚀 Windowsワンクリック起動スクリプト
├── start_zh.bat              # 🚀 中国語直接起動
├── start_en.bat              # 🚀 英語直接起動
├── start_ja.bat              # 🚀 日本語直接起動
├── start_editor.sh           # 🚀 Linux/macOS起動スクリプト
├── test_languages.py         # ✅ 多言語機能テストスクリプト
├── style-zh.conf             # サンプル設定ファイル（中国語コメント）
├── README.md                 # 📖 英語ドキュメント
├── README-zh.md              # 📖 中国語ドキュメント
├── README-ja.md              # 📖 日本語ドキュメント
├── LICENSE                   # 📜 オープンソースライセンス
└── requirements.txt          # 📦 Python依存関係リスト
```

## 🔧 スタートアップスクリプトの説明

### 🚀 スタートアップスクリプト機能
プロジェクトは便利なスタートアップスクリプトを提供し、以下のタスクを自動的に完了：
- **環境チェック**：Python環境が利用可能かどうかを自動検出
- **依存関係インストール**：必要なPythonパッケージを自動チェック・インストール
- **プログラム起動**：AviUtl2スタイル設定エディターを自動起動
- **フレンドリープロンプト**：明確なステータス情報とエラーハンドリングを提供

### 使用方法
- **Windows**：`start_editor.bat`をダブルクリックして起動
- **Linux/macOS**：`./start_editor.sh`を実行してプログラムを起動

スタートアップスクリプトはすべての複雑な環境設定を処理し、初心者ユーザーでも簡単に使用可能！

## 🔧 開発説明

### 依存関係
- **gradio**：Webインターフェースフレームワーク
- **configparser**：INI設定ファイル解析
- **pathlib**：パス処理

### コード構造
- `AviUtlStyleEditor` クラス：コアエディタークラス
- `parse_style_file()`：設定ファイル解析
- `create_gradio_interface()`：インターフェース作成
- `generate_config_content()`：設定生成

### 新しい言語サポートの追加

1. `locales/`ディレクトリに新しい言語ファイルを作成（例：`fr.json`）
2. 既存言語ファイルの形式に従ってすべてのテキストを翻訳
3. メインプログラムに新しい言語オプションを追加

### 拡張開発
プロジェクトはモジュラー設計を採用し、新しい設定パラメータタイプとインターフェースコントロールを簡単に追加可能。

## 🤝 コントリビューション

IssueとPull Requestを歓迎します！

1. このプロジェクトをFork
2. 機能ブランチを作成：`git checkout -b feature/new-feature`
3. 変更をコミット：`git commit -am 'Add new feature'`
4. ブランチをプッシュ：`git push origin feature/new-feature`
5. Pull Requestを送信

## 📄 ライセンス

このプロジェクトはMITライセンスの下でライセンスされています - [LICENSE](LICENSE)ファイルを参照

## 🙏 謝辞

- AviUtl2の作者KENに優れた動画編集ソフトウェアを提供してくれたことに感謝
- Gradioチームに優れたWebインターフェースフレームワークを提供してくれたことに感謝

## 📞 連絡先

質問や提案がある場合は、以下の方法で連絡してください：
- GitHub Issueを送信

---

**注意**：このツールはAviUtl2のスタイル設定編集のみに使用され、AviUtl2のコアプログラムファイルを変更しません。安心してご使用ください。
